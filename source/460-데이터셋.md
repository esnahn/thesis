## 단위평면 데이터셋 구축

위에서 구축된 단위평면 관련 자료를 종합하여
딥 러닝 분석에 적용할 수 있는 형식의 데이터셋을 구축한다.
평면도에서 단위세대의 주거공간을 인식하고 정규화한
단위평면 공간배치 데이터와,
한국 아파트의 진화과정을 분석하는 데 함께 필요한
준공연도, 전용면적, 지역 등
계획 관련 정보를
정리하고 데이터셋으로 구축한다.
데이터셋에 포함된 단위평면 관련 자료 항목과 그 정의는 [@tbl:dataset]와 같다.

변수명|형식|정의
------|------|---------------
floorplan|3차원 배열|단위평면 공간배치
plan_id|텍스트|평면유형 ID
year|정수|준공 시기 ([@tbl:year])
sido|정수|시도별 권역 ([@tbl:sido])
norm_area|실수|로그 정규화한 전용면적 ([@eq:area])
num_rooms|정수|침실 수
num_baths|정수|화장실 수

: 한국 아파트 공간배치 데이터셋 구성 {#tbl:dataset}

<!-- 구체적인 방법
배운 것
한계? -->

데이터셋은
딥 러닝 분석 플랫폼인
TensorFlow에 활용될 수 있는 TFRecords 파일 형식으로 구축된다.
분석 모형에 따라 전체 크기 평면과 여백이 없는 공간배치를 분석할 수 있도록
112 픽셀과 56 픽셀 크기의 두 가지 데이터셋을 각각 구축한다.
또한, 기계학습 모형은 데이터를 보고 학습한 성과를 정확하게 평가하기 위하여
학습 과정에서 문제와 답을 볼 수 있는 훈련 (training) 데이터셋과
검증 과정에서 문제만 보고 답을 맞혀야 하는 시험 (test) 데이터셋을
필요로 한다.
따라서 전체 데이터셋과 더하여,
전체 사례의 약 80%를 포함하는 훈련 데이터셋과 약 20%의 시험 데이터셋도 함께 구축한다.
동일한 아파트 단지에서는 동일한 설계 주체, 시점, 지역 등이 겹치므로
단위평면 계획에서 유사성이 더 클 수 있다.
시험 데이터셋에서 제시하는 단위평면과 같은 단지의 단위평면이 훈련 데이터셋에도 존재한다면
한국 아파트 단위평면을 학습했는지 정확하게 검증이 이루어지지 않을 수 있다.
따라서 훈련 데이터셋과 시험 데이터셋을 아파트 단지를 기준으로 나누어,
같은 단지의 단위평면은 모두 훈련 데이터셋이나 시험 데이터셋 한 쪽에만 속하도록 한다.

이 장에서 구축한 단위평면 데이터셋은
공개된 평면도를 활용한 한국 아파트 전수조사에 활용할 수 있다.
전국 아파트 단위평면 수만 건을 분석하는 것은
선행연구에서는 시도된 적 없는 작업으로,
[@sec:method]의 분석 방법론과 이 장의 데이터셋 구축을
함께 적용하여 가능해졌다.
다음 장에서는
본 연구의 방법론을 적용하여
한국 아파트의 진화과정을 분석하고,
이를 통해 본 연구의 방법론을 검증하고자 한다.
