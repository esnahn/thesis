# 건축 공간과 딥 러닝 {#sec:dl}

이 장에서는 기계학습과 딥 러닝 방법론을 살펴보고
딥 러닝을 건축 분야에 활용하는 선행연구를 검토하여
건축 공간 연구에 대한 딥 러닝의 적용 가능성을 고찰한다.
이를 통하여
딥 러닝을 활용한 한국 아파트 단위평면 연구의 방법론적 요구조건을 확인한다.

## 기계학습

<!-- https://www.kdnuggets.com/2016/03/data-science-puzzle-explained.html -->

기계학습은
컴퓨터가 사람과 같은 지능적 판단을 할 수 있도록 하는
인공지능의 한 갈래이다. ([@fig:venn])
기계학습을 다른 인공지능 방법론과 구분짓는 가장 큰 특징은
사람의 사고 방식을 닮는 것이 목표가 아니라는 점이다.
기계학습 모형은 데이터에서 귀납적으로 규칙을 학습하여
다양한 작업을 수행할 수 있다.
기계학습이 처리할 수 있는 작업에는
분류 (classification), 회귀분석 (regression),
새로운 사례의 합성 (synthesis), 결측값의 대체 (imputation of missing values)
등이 포함된다. [@Goodfellow-et-al-2016, p. 96--101]
이러한 접근 방식은
사람의 판단 과정을 컴퓨터에 그대로 옮기는 것이 목표인
전문가 시스템 (expert system)과는 정반대이다.
기계학습은
사람의 개입 없이 데이터에서 규칙을 스스로 도출하는 비지도 (unsupervised) 방법론이기 때문에
사람이 그 판단 과정을 설명하기 어려운 작업법도 학습할 수 있다는 장점이 있다.

![인공지능, 기계학습, 딥 러닝의 관계 [@Piatetsky-Shapiro2016]](data_science_venn.jpg){width=70% #fig:venn}

데이터 과학의 다양한 개념을 벤 다이어그램으로 표현한 [@fig:venn]에서
기계학습은
데이터에서 의미 있는 통계적 사실을 발견하는 데이터 마이닝 (data mining)과
전통적인 방식으로 처리하기 어려운 규모의 데이터를 다루는 빅데이터 (big data)
등의 개념과 교집합을 갖는다.
특히 데이터가 많고 폭넓을수록
기계학습의 귀납적 방법론을 통하여 더 유용한 규칙을 도출할 수 있기 때문에
모든 데이터에 대한 전수조사를 수행할 수 있는 빅데이터와 깊은 연관이 있다.

기계가 스스로 학습하게 하는 목적을 달성하기 위하여
다양한 구조와 학습 방식을 지닌 기계학습 모형들이 개발되었다.
이 모형들은 학습이 가능한 데이터와 학습된 규칙의 특성 측면에서 매우 다양한 모습을 보인다.
[@fig:ml_comparison]은
빨간 점과 파란 점으로 표현된 데이터셋 사례들에 대하여
다양한 기계학습 모형들이
서로 다른 색의 점이 나타나는 영역을 구분짓는 규칙을 학습한 결과를 나타낸 것이다.
기계학습 모형에 따라 같은 데이터에서도 서로 다른 규칙이 도출되며,
학습된 규칙의 표현 능력과 제약 또한 크게 다른 것을 알 수 있다.

![다양한 기계학습 모형 비교 [@scikit-learndevelopers2019]](classifier_comparison.png){#fig:ml_comparison}

이렇게 다양한 기계학습 모형은 각각 다른 성격의 문제를 잘 해결할 수 있다.
그러나
사람은 매우 쉽게 처리하지만 컴퓨터로 처리하기에는 매우 어려운 과제도 존재한다.
사람은 사진을 보고 그 안의 사물이 무엇인지 매우 쉽게 인식할 수 있다.
그러나 컴퓨터는 사진을 수없이 많은 픽셀의 집합으로 입력받는다.
각 픽셀은 독립적인 값을 가질 수 있는 변수이고,
사진 한 장은 수백만 개의 요인을 고려해야 하는 문제가 된다.
차원의 저주 (curse of dimensionality)는
이렇게 데이터의 복잡성이 높아질수록
기계학습으로 문제를 해결하기가 지수함수적으로 어려워지는 현상을 의미한다.
[@Goodfellow-et-al-2016, p. 152--154]
이처럼 사람이 일상적으로 처리하는 작업의 대부분은
여러 기계학습 모형을 적용할 수 없을 정도로 높은 복잡성을 지닌다.
그러나
이렇게 복잡도가 높은 과제를 해결할 수 있는 기계학습 방법론인
딥 러닝이 등장하면서
기계학습의 귀납적 접근 방식을 더욱 다양한 분야에 적용하게 되었다.

귀납적 방법론으로서의 기계학습의 성격을
마찬가지로 정량적 방법론인
공간구문론 (space syntax)과 비교하면
그 차이가 더 잘 드러난다.
공간구문론에서 사회 현상에 영향을 미치는 공간의 구조를 재현하는 방식은
단위공간과 그 연결 관계를 선험적인 기준에 따라 결정하는 것이다.
축선도 (axial map)와 볼록공간도 (convex map)는
같은 공간의 구조를 서로 다른 두 개의 그래프로 표현한다.
축선도에서
공간의 최소 단위인 단위공간은
일직선의 가시선인 축선 (axial line) 이고,
서로 교차하는 축선을 연결한 그래프가 공간 구조로 도출된다.
반면, 볼록공간도에서는
모든 경계가 볼록하여 내부의 모든 지점이 서로 보이는 볼록공간 (convex space)이
단위공간이 된다.
축선도에서 한 지점이 여러 축선에 속하는 교차점이 될 수 있었던 것과 달리,
볼록공간도는 각 단위공간이 겹치지 않도록 작성된다.
이렇게 두 방법론은 공간 구조를 전혀 다른 단위공간과 그 연결 그래프로 재현하지만,
가시성 (visibility) 이라는 선험적 기준에서 연역적으로 도출되었다는 점은 같다.
이러한 특성은 다른 공간분석 모형에도 동일하게 적용된다.

공간분석 모형 중 하나인
가시성 그래프 (visibility graph)는
공간을 2차원 격자로 분할하여 격자점 하나하나를 단위공간으로 삼는다.
[@Turner2001]
따라서 축선도나 볼록공간도와 달리
단위공간의 분할에 작성하는 사람의 주관에 따라 달라질 수 있는 여지가 없다.
이러한 설정은
기계학습 모형이 컴퓨터 이미지를 분석하는 경우와 매우 유사하다.
그러나 단위공간의 연결 관계를 상호 가시성에서 도출하고,
공간구문론의 그래프 중심성 지표를 적용하여 사회 현상과 비교하는 등을
연구자가 선험적으로 결정하는 연역적 방법론이라는 점은
가시성 그래프 분석에서도 다르지 않다.
([@fig:vg])

<div id="fig:">

![가시성 그래프 [@Turner2001]](syntax_vg.png){height=40% #fig:vg} \qquad
![딥 러닝의 계층간 연결 [@Goodfellow-et-al-2016]](conv.png){height=25% #fig:conv} \qquad

가시성 그래프와 딥 러닝 모형 비교
</div>

기계학습에서는 반대로 주어진 데이터를 가장 잘 설명하는 규칙을 귀납적으로 도출한다.
기계학습 모형에서
각 입력값 사이에 존재하는 관계는
존재할 수 있는 모든 관계를 포괄하는 가능성을 표현한다.
기계학습의 핵심인 학습 알고리즘은
데이터에 내재한 규칙을 반영하여 그러한 관계의 강도를 조절하면서
데이터를 잘 설명하는 일부 관계만 남긴 모형을
귀납적으로 만들어낸다.
기계학습에서 입력값의 인식 및 처리를 위한 지표는
이러한 과정을 통하여 귀납적으로 도출된다.
따라서
하나의 기계학습 방법론으로 다양한 데이터를 해석하고 처리하는 모형을 얻는 것이 가능하다.
([@fig:conv])

## 딥 러닝

딥 러닝 (deep Learning)은
기계학습 모형 중 하나인 인공신경망 (artificial neural network)을
더욱 깊은 구조로 발전시킨 심층 신경망 (deep neural network)을
활용하는 기계학습 방법론이다.
생명체에서
뉴런은
전기 자극을 받으면 연결된 다른 뉴런들에 그 자극을 전달하는
단순한 구조를 지니고 있지만
수많은 뉴런이 서로 연결되어 뇌를 이루고 지능을 갖추듯이,
인공신경망도
단순한 계산을 수행하는 노드가 서로 연결되어 이어지는 신경망 구조를 차용한다.
입력층과 출력층 사이에 여러 은닉층을 갖춘 심층 신경망은
여러 계층 구조를 이용하여 단순한 개념이 결합된 복잡한 개념을 학습하는 것이 가능하다.
[@fig:cnn]은 심층 신경망 모형이 물체의 모양을 인식하는 과정을 보여준다.
단순한 경계선의 인식에서 시작해
점점 더 복잡한 모양을 인식하는 계층을 거쳐
사람과 자동차 등의 특성을 식별할 수 있게 된다. [@Goodfellow-et-al-2016, pp. 5--6]

![심층 신경망 모형의 구조 [@Goodfellow-et-al-2016, p. 6; @zeiler2014visualizing 에서 재구성]](deeplearning.png){#fig:cnn}

CNN (convolutional neural network, 합성곱 신경망)은
픽셀로 이루어진 컴퓨터 이미지와 같이
격자 구조로 구성된 데이터를 처리하는 데 특화된 딥 러닝 모형이다.
[@Goodfellow-et-al-2016, 326]
바둑판이나 건축 공간을 모형화한 가시성 그래프 등
일정 간격의 격자 구조로 표현할 수 있는 모든 대상은 CNN의 입력값이 될 수 있다.
바둑 인공지능인 알파고에도
착수 위치를 분석하는 정책망과 승률을 예측하는 가치망에 CNN이 적용되었다.
([@fig:alphago])

![알파고에 사용된 합성곱 신경망 [@Silver2016]](alphago.png){width=70% #fig:alphago}

딥 러닝은 더 많은 노드를 더 깊은 구조로 연결한 신경망을 통하여 더 어려운 과제를 수행할 수 있다.
CNN은 더 깊은 신경망 구조를 달성하기 위하여
격자 구조에서 나타나는 공간적 관계를 반영하여
공간적으로 서로 인접한 노드만을 연결하는 방식으로
모형의 복잡도를 낮춘다.
CNN은
이러한 구조를 통하여
더 깊은 구조의 신경망을 학습시킬 수 있고,
영상 인식부터 바둑 승률 예측까지
데이터의 공간적 관계가 중요한 과제를 잘 처리할 수 있다.

딥 러닝은 다른 기계학습 모형과 비교할 때
동일한 수준의 모형을 학습시키기 위하여 더 많은 데이터와 더 많은 계산을 필요로 한다.
비교적 단순한 문제에도 깊은 구조의 모형이 필요한 것은
오래 전부터 연구되었던 기계학습 방법론인 신경망이 최근에서야 두각을 나타내는 이유이기도 하다.
시간이 지날수록
점점 더 많은 데이터에 대한 접근이 가능해지면서
딥 러닝 학습을 위한 데이터셋의 규모도 커지고,
이를 활용하여 더 어렵고 복잡한 과제를 처리할 수 있는
더 크고 깊은 구조의 신경망이 딥 러닝에 활용되고 있다.
손으로 쓴 0부터 9까지 10가지 숫자를 구분하는 MNIST 데이터셋은
수만 개의 손글씨 이미지를 담고 있으며,
많은 기계학습 모형이 이를 활용하여 사람과 같은 수준으로 손글씨를 구분할 수 있다.
그러나 사진 속에서 약 1만 가지 종류의 대상을 분류하는 것과 같은 더 어려운 과제에는
더 많은 데이터가 필요하기 때문에,
이를 위한 ImageNet10K 데이터셋은
약 1천만 개에 달하는 이미지를 포함한다. ([@fig:increasing_dataset])
딥 러닝은 이렇게 큰 데이터셋을 활용하여
다른 기계학습 모형의 한계를 넘어선 더 어려운 과제를 수행할 수 있다.

[@sec:floorplan]에서 구축한 한국 아파트 단위평면 데이터셋의 경우
약 5만 개의 단위평면을 포함하고 있다.
유사한 규모의 데이터셋에서 나타나는 과제의 성격을 검토하면,
이 데이터셋에 딥 러닝을 활용하여
달성할 수 있는 과제의 수준을 예측할 수 있다.
사례 수가 수만 개 수준에 달하는 데이터셋은
10가지 숫자 손글씨를 구분하는 MNIST와
10가지 사진 속 사물을 구분하는 CIFAR-10 등과
유사한 규모이다. ([@fig:increasing_dataset])
따라서 단위평면 데이터셋에 딥 러닝을 적용하여 분석하였을 때,
한국 아파트의 단위평면을 약 10가지 유형으로 분류하는 정도의 일을 처리할 것으로 기대할 수 있다.

컴퓨터의 성능이 발전하면서
딥 러닝의 학습 능력의 한계를 결정하는
신경망의 규모도 지수함수적 속도로 증가하고 있다.
이러한 성장은
현재 벌과 개구리의 뇌를 이루는 뉴런의 수와 비슷한 규모의 딥 러닝 모형이
21세기 중반에는 인간의 뇌에 맞먹는 크기에 도달할 것이라는 예측으로 이어진다.
(@fig:increasing_neurons)
컴퓨터의 성능이 계속 발전하고 딥 러닝 연구가 진전되어
이러한 추세가 계속 이어진다면,
앞으로도 다양한 분야에서 딥 러닝이 인간만이 할 수 있었던 일을
딥 러닝을 통해 처리하게 될 것이다.

<div id="fig:">

![시간에 따라 증가하는 데이터셋 크기 (빨간 선은 [@sec:floorplan]의 한국 아파트 데이터셋의 크기)](increasing_dataset.png){#fig:increasing_dataset} \qquad
![시간에 따라 증가하는 신경망 크기](increasing_neurons.png){#fig:increasing_neurons}

딥 러닝의 성장 속도 [@Goodfellow-et-al-2016, pp. 19, 23]
</div>

## 건축 공간에 대한 딥 러닝

기계학습과 딥 러닝은
사람의 개입 없이 데이터에 내재된 규칙을 발견하고
그에 따른 작업을 자동으로 수행할 수 있기 때문에
건축을 포함한 다양한 분야에서 활용 가능성이 높다.
특히 CNN은 2차원 이미지에 대한 분석에서 매우 뛰어난 성과를 보여주고 있으므로
평면도 이미지나 가시성 그래프처럼
건축 공간을 2--3차원 격자점으로 재현하여 분석하는 연구에 적합하다.
따라서 건축 분야에서 딥 러닝을 활용한 연구가 이미 많이 이루어지고 있다.

<!-- riss 검색 결과? -->

아파트의 단위평면에 딥 러닝을 적용한 연구는 ArchiGAN이 있다.
ArchiGAN은 보스턴 지역의 아파트 계획을 딥 러닝 모형에 학습시켜,
대지 조건에서 주동 배치,
주동 내 단위세대 배치,
단위세대 내 공간배치,
실내 가구 배치를
연쇄적으로 생성하는 모형이다.
[@Chaillou2019]

ArchiGAN은 이미지를 변환하는 딥 러닝 모형인 Pix2Pix를 활용하였다.
[@Chaillou2019]
Pix2Pix는 서로 대응되는 이미지 사이의 관계를 학습할 수 있으며,
학습하는 데이터에 따라 다양한 활용이 가능하다.
[@fig:pix2pix]는
Pix2Pix가
대상의 종류와 위치를 표현한 이미지에서 도로주행과 건물 입면 사진을 생성하고,
윤곽선에서 가방의 사진을 그려내는 등
주어진 데이터에 따라 다양한 종류의 작업을 수행할 수 있다는 것을 보여준다.
[@pix2pix2016]

![Pix2Pix [@pix2pix2016]](pix2pix.png){#fig:pix2pix}

ArchiGAN은 대지 조건에서 아파트 평면을 생성하는 작업을
4단계의 이미지 변환 작업으로 분할하여,
그 중 간단한 알고리즘으로 수행할 수 있는 주동 평면 분할을 제외한
주동 배치, 단위세대 공간배치, 실내 가구 배치 3단계에 Pix2Pix를 적용하고,
수작업으로 구축한 보스턴 아파트 평면 데이터로 학습시켜 만들어진 모형이다.
[@Chaillou2019]

Pix2Pix와 이에 기반한 ArchiGAN은
GAN (generative adversarial network, 적대적 생성 신경망) 구조로 이루어져있다.
GAN은
훈련용으로 주어진 실제 데이터와 가짜로 생성된 것을 구분하는 판별자 (discriminator)와
판별자를 속일 수 있는 데이터를 생성하는 생성자로 이루어진다.
창과 방패의 싸움처럼,
판별자와 생성자는 서로 적대적으로 속이고 속지 않기 위한 경쟁을 반복한다.
이러한 과정을 통하여
생성자는
실제 데이터와 분간하기 어려운
가상의 데이터를 생성할 수 있게 된다.

ArchiGAN에서
단위세대 내 공간배치를 생성하는 단계는
보스턴 아파트의 단위평면을
거실, 침실, 화장실, 복도, 주방, 벽장 6가지 공간으로 분류한 공간배치를
이미지 형태의 훈련 데이터로 활용한다.
이러한 데이터를 활용하여
GAN은
실제 평면의 공간배치와 가짜를 구분하는 판별자 (discriminator)와
판별자를 속일 수 있는 가상의 평면을 만들어내는 생성자 (generator)
두 신경망을 서로 적대적으로 학습시킨다.
이러한 학습 과정을 통하여
생성자가 사람이 보기에 실제 보스턴의 아파트와 구분할 수 없는 새로운 평면을 생성하도록 한다.
[@fig:archigan]은 다양한 단위세대 형태에 대하여 왼쪽의 외부조건을 입력하면 가운데와 같은 공간배치를 출력하는 것을 보여준다.
이를 오른쪽의 실제 보스턴 아파트의 공간배치와 비교하면 약간씩 다른 점을 발견할 수 있다.
이를 통하여 ArchiGAN이 단순히 훈련 데이터로 주어진 공간배치를 기억하는 것이 아니라
여러 평면에서 공통적으로 나타나는 배치 계획의 성격을 학습하였다는 점을 확인할 수 있다.
[@Chaillou2019]

![ArchiGAN [@Chaillou2019, p. 42]](archigan.png){#fig:archigan}

ArchiGAN이
보스턴 아파트의 단위평면을 학습하여
실제와 흡사한 평면을 생성할 수 있는 것이
모든 조건에서 아파트의 단위평면을 설계할 수 있는 능력을 갖추었다는 뜻은 아니다.
기계학습은 귀납적으로 데이터에서 잠재된 규칙을 찾아내는 방식이기 때문에,
데이터가 포괄하는 범위를 벗어난 외삽은 가능하지 않다.
<!-- 사람처럼 데이터에 없는 규칙을 상상하고 외삽을 통해 적용하기는 어렵다. -->
보스턴 아파트만으로 학습한 딥 러닝 모형이
다른 시공간적 환경에서 아파트 평면을 계획할 수는 없다는 것이다.
실제로 ArchiGAN에
한국 아파트에서 전형적인 계단실형 단위세대에 적용하면
[@fig:archigan_korea]와 같이
주거의 기본 조건을 갖추지 못한 계획을 도출한다.
전면 전체와 후면의 절반이 침실로 채워지고,
화장실과 복도여야 할 공간은 방의 형태를 이루지 못하고 흩어져 있는 공간배치를 보인다.
이러한 결과는
당연히 보스턴 아파트의 평면과 다르지만,
전면에서 후면까지 이어진 통합된 LDK를 중심으로
각 실이 배치된 한국 아파트의 공간배치와도 전혀 다른 모습이다.

![ArchiGAN을 한국 아파트 단위세대에 적용한 결과 [@Chaillou2019]](archigan_korea.png){width=60% #fig:archigan_korea}

이와 같은 사례를 통하여
2차원 이미지로 재현된 건축 평면에 대한 분석과 재현에 딥 러닝을 활용할 수 있음을 확인하였다.
그러나 딥 러닝을 포함한 기계학습은
주어진 데이터 안에서만 규칙을 발견할 수 있다는 한계가 있다.
보스턴 아파트를 대상으로 학습한 딥 러닝 모형으로는
현재까지 지어진 보스턴 아파트를 재현하는 것에만 적용할 수 있으며,
다른 지역의 아파트나 미래에 생겨날 새로운 조건의 아파트를 계획하는 능력을 갖출 수 없다.
따라서
한국 아파트를 분석하기 위해서는
한국 아파트에 대한 데이터로 학습한 딥 러닝 모형이 필요하다는 것을 알 수 있다.

## 딥 러닝의 해석

기계학습 모형은
사람의 개입과 지도 없이도
데이터 안에 내재된 규칙을 귀납적으로 발견할 수 있다.
그러나
기계학습으로 학습된 규칙은
사람이 이해하기 어려운 경우가 많다.
특히
딥 러닝은 깊은 신경망 구조에서 나오는 높은 복잡도를 활용하여
다양한 분야에서 다른 기계학습 방법론보다 뛰어난 성능을 보이지만,
그 복잡성에 비례하여 학습된 규칙을 사람이 이해하는 것이
블랙박스에 비유될 정도로 어렵다.

기계학습을 통하여 학습된 규칙이
사람이 기대한 것과 완전히 다른 경우도 많다.
이러한 특성은
입력값을 약간만 조작하여 전혀 다른 판단을 이끌어내는
적대적 공격 (adversarial attack) 에서 잘 드러난다.
사람은 정지 표지판이 어떤 모양과, 색, 글자로 이루어져 있는지로 인식하고,
많은 부분이 생략되거나 상당한 수준으로 변형되어도 알아볼 수 있다.
그러나 여러 교통 표지판을 잘 구분할 수 있는 딥 러닝 모형도
그 모형의 판단 기준에 대한 맞춤형 공격에 취약하다.
예를 들어,
정지 표지판에 스티커 몇 조각을 붙이기만 하여도
전혀 다른 형태의 속도제한 표지판으로 인식할 수 있다. [@eykholt2017robust, @fig:adversarial_sticker]
이러한 공격이 가능한 이유는
사람이 성장 과정에서 학습한 모양, 색, 글자 등의 개념을 여러 작업에 공통적으로 적용하는 것과 달리,
기계학습 모형은
데이터셋 안의 사례를 구분하기 위한 최소한의 판단 기준만을 학습할 수 있기 때문이다.
교통 표지판을 잘 분류하는 딥 러닝 모형이
어떤 기준으로 그 작업을 수행하는지 알 수 없다는 점은
궁극적으로 사람이 인공지능을 신뢰할 수 있는지에 대한 문제로도 이어진다.

<div id="fig:adversarial">

![적대적 사례 생성 과정](adversarial_pipeline.png){#fig: width=100%} \qquad
![속도제한 표지판으로 오인식되도록 변형한 정지 표지판](adversarial_sticker.jpg){#fig:adversarial_sticker height=40%} \qquad

교통 표지판 인식 딥 러닝 모형에 대한 적대적 공격 [@eykholt2017robust]
</div>

이처럼
딥 러닝이 학습한 규칙을
파악하기 어려울 뿐만 아니라
사람의 사고 방식에 비추어 짐작하기도 불가능하다는 점은
건축 등 다른 분야의 연구에 활용하고자 할 때 더 문제가 된다.
작동 원리를 알 수 없어도
사람 대신 자동으로 작업을 수행할 수만 있으면 되는 것이 아니라,
기계학습을 적용하여 데이터에서 규칙을 발견하는 것 자체가 목적이기 때문이다.
딥 러닝의 이러한 단점을 극복하기 위하여,
딥 러닝 모형이 데이터에서 학습한 규칙을
사람이 이해할 수 있도록
설명하기 위한 기술도 연구된다.

잠재공간 (latent space) 분석은
딥 러닝 모형이 데이터에서 학습한 규칙의 성격을 확인할 수 있는 방법론이다.
딥 러닝 모형에서 입력 데이터를 인식한 결과는
은닉층의 노드들이 가지는 값으로 표현된다.
입력값 전반에 걸친 특성을 인식한 결과는
흔히 출력층 직전 계층의 값을 통해 파악할 수 있다.
이 때
노드 하나하나의 값을 한 차원 상의 좌표로 해석하면,
입력 데이터를 처리한 후에
해당 계층의 노드들이 갖게 되는 값은
다차원 벡터공간 위의 한 점의 좌표에 대응되는데,
이 다차원 벡터공간이 잠재공간이다.
물론 일반적인 딥 러닝 모형에서
한 계층에는 수백 수천 개 이상의 노드가 존재하므로
잠재공간도 사람이 인식할 수 없는 고차원 공간이 된다.
따라서
사람이 인식할 수 있도록
주성분 분석 (principal component analysis, PCA)이나
독립 성분 분석 (independent component analysis, ICA) 등을 통한
차원 축소 (dimensionality reduction)를
고차원 잠재공간에 적용하여
2--3차원 공간에 시각화한다.

[@fig:art]은
회화 작품의 이미지를
20가지 미술 양식으로 분류하는
딥 러닝 모형의 잠재공간을
차원축소를 통하여
3차원 공간에 표현한 것이다.
잠재공간 안에서
딥 러닝이 인식한 미술 양식은
원점에서의 방향으로 구분된다.
같은 미술 양식에 속하는 여러 작품은
원점에서 한 방향으로 뻗어나가는 군집을 이룬다.
이렇게
잠재공간 분석을 통하여
딥 러닝이 서로 다른 미술 양식에서 나타나는 차이를 구분하여 인식하는 것을
확인할 수 있다.
[@Elgammal2018]

![잠재공간 안에 재현된 미술 양식 [@Elgammal2018]](art_style.png){#fig:art}

잠재공간과 실제 입력 데이터 사이의 관계는 비선형적이기 때문에,
딥 러닝 모형 내부에서
잠재공간을 구성하는 각 요인이
구체적으로 입력 데이터의 어떤 특성과 연관되는지를 파악하기는 어렵다.
잠재공간 분석을 통하여
이미지를 분류하는 딥 러닝 모형에서
특정 분류와 연관된 요인을 도출할 수는 있지만,
그렇게 분류된 이유를 알 수 없다는 문제가
그 이유가 되는 요인의 성격을 알 수 없다는 것으로 옮겨갈 뿐이다.
따라서 딥 러닝이 입력 데이터를 인식하는 과정에 대한 방법론 또한 연구된다.

역합성곱 신경망 (deconvolutional network)은
CNN 모형 내부의 합성곱 신경망이
입력 데이터에서 어떠한 패턴을 인식하는지를
시각화하는 딥 러닝 모형이다.
역합성곱 신경망은 CNN 모형의 각 계층을 가장 많이 활성화하는 입력값을 찾는다.
이를 통해 딥 러닝 모형이 인식한 패턴을 과장하여 강조하는 시각화를 얻는다.
[@fig:deconv]에서 왼쪽 이미지에 나타나는 패턴은
오른쪽 이미지를 분류하기 위하여 학습된 딥 러닝 모형에서
그 이미지에서 인식된 패턴을
역합성곱 신경망을 통하여 재구성한 것이다.
9개 이미지로 이루어진 정사각형들은
잠재공간을 구성하는 하나의 요인에 대응한다.
임의로 선택된 10개 요인에 대하여,
해당 요인에 가장 잘 들어맞아
가장 강하게 활성화하는 9개 사례에서
이미지의 어떤 특징이 그 요인에 대응되는지를 시각화한다.
예를 들어, 윗줄 오른쪽의 경우
입력 이미지에는 다양한 대상이 나타나고 있지만,
해당 요인은 그 안에 있는 잔디밭에 집중하여 인식하고 있다는 것을 확인할 수 있다.
[@zeiler2014visualizing]

![역합성곱 신경망으로 시각화한 딥 러닝의 이미지 인식 [@zeiler2014visualizing]](deconv.png){#fig:deconv}

<!-- CAM (class activation mapping)은
CNN 모형이
입력 데이터를 특정한 범주로 분류하는 이유가
입력값 중 어느 영역에 근거한 것인지를
시각화하는 방법론이다.
[@fig:cam]는
이미지를 분류하는 CNN 모형에서
해당 분류에 영향을 미치는 영역을
CAM 방법론으로 시각화한 것이다.
아랫줄에서 빨간 색으로 표시된 영역은
윗줄의 사진을 대응되는 범주로 분류하는 데 가장 큰 영향을 미친 영역을 나타낸다.
왼쪽 양치질의 경우,
사진 속에서 칫솔이 있는 영역이
해당 이미지가 양치질로 분류되는 데 가장 큰 영향을 주는 것을 알 수 있다.
이를 통하여 딥 러닝이
양치질이라는 행동이 사진 속에서 어떻게 나타나는지
제대로 인식하고 있음을 확인할 수 있다.
[@Zhou2015]

![CAM을 통한 분류 근거 영역 시각화 [@Zhou2015, p. 1]](cam_zhou.png){#fig:cam} -->

위에서 살펴본 다양한 방법론을 활용하여
딥 러닝 모형의 내부 구조 파악이 어려운 단점을 극복하고,
딥 러닝이 데이터에서 학습한 규칙을 파악할 수 있다.
이를 통하여
데이터를 분석하여 내재된 규칙을 발견하는 것이 목적인 연구에서도
딥 러닝을 적용하는 것이 가능하다.

## 소결

이 장에서는
대규모 데이터에 대한 전수조사를 가능하게 하는
기계학습과 딥 러닝 방법론을 살펴보고
건축 공간에 적용하기 위한 전략을 고찰하였다.
기계학습은
데이터에서 스스로 규칙을 발견하는
귀납적 방법론이다.
기계학습 모형은
사람의 지도 없이도
주어진 데이터에 따라
다양한 작업법을 학습하고 그 작업을 수행할 수 있다.
따라서,
건축 공간에 대한 데이터를 기계학습 모형에 입력할 수 있는 형태로 구축하면
기계학습을 적용하여 건축 공간에 대한 분석이 가능하다.
<!-- 기계학습은 한국 아파트 전수조사와 같은 대규모 분석에 적합한 방법론이다. -->

딥 러닝은
단순한 구조로 다른 기계학습 모형보다 어렵고 복잡한 과제를 학습할 수 있다.
그러나
딥 러닝 모형을 학습시키는 데는
다른 기계학습 모형에 비해서도 더 많은 데이터가 요구된다.
CNN (convolutional neural network)은
격자 구조의 데이터에 적합한 딥 러닝 모형으로
이미지 인식을 포함한 다양한 분야에 활용되고 있다.
건축 공간 연구에 CNN을 적용하기 위해서는
가시성 그래프와 같이
건축 공간을 격자 구조로 재현하여야 하며,
매우 많은 수의 폭넓은 데이터가 필요하다.

건축에서도 기계학습과 딥 러닝은 이미 많은 연구에서 활용되고 있다.
ArchiGAN은
GAN 모형 중 하나인 Pix2Pix를 활용하여
보스턴 아파트의 평면을 학습하여 대지 조건에서 평면을 생성한다.
<!-- Pix2Pix는 이미지를 변환하는 딥 러닝 모형으로,
학습하는 데이터에 따라 다양한 이미지 변환 작업을 처리할 수 있다. -->
ArchiGAN은 아파트 평면 계획을
여러 단계의 이미지 변환 작업으로 분할하여
각 단계에 딥 러닝을 적용한다.
<!-- 이 단계 중 하나인 단위세대 공간배치 생성 모형은
단위세대 경계 조건을 입력받아
보스턴 아파트에서 학습한 공간배치를
거실, 침실, 화장실, 복도, 주방, 벽장 6가지 공간으로 생성한다. -->
그러나 이 모형을 한국 아파트의 단위세대에 적용하면
한국 아파트 또는 보스턴 아파트와 유사한 평면을 도출하지 못하고
주거의 기본 조건을 갖추지 못한 공간배치를 내놓는다.
이러한 결과는
보스턴 아파트로 학습한 딥 러닝 모형을
한국 아파트 등 다른 조건에 활용할 수 없음을 보여준다.
따라서
한국 아파트에 딥 러닝을 적용하기 위해서는
한국 아파트에 대한 데이터를 구축하여 학습시킬 필요가 있음을 확인하였다.

기계학습이 데이터에서 귀납적으로 학습한 규칙은 사람의 예측과 크게 다를 수 있으며,
기계학습, 특히 딥 러닝이 학습한 규칙을 파악하기는 매우 어렵다.
딥 러닝의 내부 구조를 분석하여
딥 러닝이 데이터에서 학습한 규칙을 설명하기 위한 다양한 방법론이 있다.
잠재공간 분석은 딥 러닝 모형 안의 은닉층에
주성분 분석이나 독립 성분 분석 등의 차원 축소 기법을 적용하여
인식 결과를 설명하는 방법론이다.
잠재공간 속 데이터의 분포를 검토하여 딥 러닝이 데이터에서 학습한 규칙을 확인할 수 있다.
그러나 잠재공간 분석은 입력 데이터에 대한 인식 결과를 설명할 수는 있어도,
데이터의 어떤 특성 때문에 그런 결과가 도출되었는지는 설명할 수 없다.
CNN 모형에 대하여 입력 데이터와 인식 결과 사이의 관계를 간접적으로 확인하기 위한 방법론이 있다.
역합성곱 신경망은
CNN의 합성곱 신경망을 가장 활성화하는 입력값을 찾아
딥 러닝 모형이 인식하는 패턴을 시각화하는 방법론이다.
CAM (class activation mapping)은
입력 데이터에서 인식 결과와 연관된 영역을 찾아 시각화하는 방법론이다.
이러한 방법론은 딥 러닝의 내부 구조 파악이 어려운 단점을 극복하고
데이터의 분석이 목적인 연구에도 딥 러닝을 적용할 수 있도록 한다.

이러한 고찰을 통하여,
한국 아파트에 대한 전수조사를 딥 러닝을 활용하여 수행하기 위하여 필요한
방법론적 요구조건을 확인하였다.
이미 건축 공간에 딥 러닝을 적용한 선행연구가 있으나,
한국 아파트에 대한 연구를 위해서는 한국 아파트 데이터셋이 필요하다.
한국 아파트의 공간을 2차원 격자 구조의 이미지로 재현한 데이터가
최대한 폭넓게 준비되어야 한다.
딥 러닝 모형에 한국 아파트 데이터를 적용하여 학습시킨 이후에,
다양한 해석 방법론을 학습된 모형에 적용하여
데이터에 내재한 규칙을 발견할 수 있다.
이러한 과정을 통하여
딥 러닝을 활용한 건축 공간 연구를 수행할 수 있음을 확인하였다.

\newpage
