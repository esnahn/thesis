## 건축 공간 모형화 {#sec:fp_modeling}

이 절에서는
건축 공간에 대한 분석에 딥 러닝을 활용할 수 있도록
건축 공간을 모형화한다.
이를 위하여,
먼저 건축 공간 분석에 적합한 딥 러닝 모형을 선정한다.
다양한 딥 러닝 모형의 특성을 파악하고,
딥 러닝 모형의 분석 대상과
공간분석의 공간 구조 모형을 비교하여
공간배치를 분석하기에 적합한 딥 러닝 모형을 선정한다.
이후 선정된 딥 러닝 모형에 공간배치를 학습시킬 수 있도록
건축 공간을 모형화하는 방법을 수립한다.

딥 러닝은
1960년대 등장한 다층 퍼셉트론에서 이어지는
다양한 심층 신경망 모형을 포괄한다.
그 중에서 활발한 연구가 진행되고 있는 분야는
크게
합성곱 신경망 (convolutional neural network, CNN)과
순환 신경망 (recurrent neural network, RNN)
두 가지로 나뉜다.
[@Goodfellow-et-al-2016]
이 절에서는
두 모형 각각을 대상으로
분석 데이터의 요구조건을 파악하고,
그러한 요구조건에 가장 잘 맞는 공간 구조 모형을 대응시켜
공간배치 분석에 대한 활용 가능성을 검토한다.

합성곱 신경망은
격자 구조의 데이터 처리에 특화된 딥 러닝 모형이다.
시계열 데이터는 일정 시간 간격의 1차원 격자로,
이미지는 2차원 픽셀 격자로 나타내는 등,
격자 구조로 표현할 수 있는 다양한 분야에 대한 분석에 활용이 가능하다.
[@Goodfellow-et-al-2016]

공간분석에서도
건축 공간을 격자 구조로 재현 (representation) 하는 모형이 존재한다.
시각적 접근-노출 (visual acesses and exposure, VAE)은
공간의 시각적 구조를 분석하기 위하여,
공간 안의 모든 지점에서 다른 모든 지점을 볼 때
시야 안에 들어오는 면적의 합계를 해당 지점의 시각적 접근으로,
반대로 다른 지점의 시야 안에 들어가는 경우의 합계를 시각적 노출로 정의하였다.
이 때 '모든 지점'은 2차원 직교 격자점으로 조작적으로 정의되었다.
공간을 일정 간격의 격자로 표현하였기 때문에,
면적 또한 해당 영역 안에 포함된 지점의 수로 정의될 수 있었다.
물론 Archea의 본래 정의는 수학적 정의라기보다는 절차적 정의였으며,
이러한 논의는 직관적으로 격자 구조가 채용된 이후에 사후적으로 이루어진 것이다.
[@황용하2003시각적]

이러한 격자 구조에 대한 직관적 접근은 이후에도 반복된다.
가시성 그래프 분석 (visibility graph analysis, VGA)은
한 지점에서 보이는 모든 영역을 나타내는 isovist를 활용하여
공간 안 모든 지점의 가시영역 (isovist)이 맺는 관계를 공간 구조로 모형화한다.
이 때, "공간 전체에 걸쳐 가시영역을 생성"하는
"가장 명백한 접근법은 어떤 일정한 간격을 두고 생성하는 것"이며,
"이는 생성되는 위치가 어떠한 규칙적인 격자 (grid or regular lattice) 위의 점이 된다는 함의가 있다".
[@Turner2001]

이렇게 건축 공간을 2차원 직교 격자로 재현하는 것은
공간분석에서 널리 활용되는 방법론이다.
따라서 합성곱 신경망은
2차원 평면 위에 표현된 건축 공간에 대한 분석에 적합하다.
특히, 2차원 이미지 인식을 위한 합성곱 신경망 모형은 많은 연구가 이루어진 주제로 다양한 모형이 존재한다.
따라서
건축 공간을 이미지로 표현하는 단계를 추가하는 것만으로
건축 공간 분석에 기존 신경망 모형을 활용할 수 있는 장점이 있다.

또한, 합성곱 신경망은
이미 이미지 형식으로 표현된 건축 공간에 대한 분석에도 적합하다.
위성사진처럼 원래부터 이미지인 2차원 데이터도 있지만,
지도나 평면도 등 건축도시 공간에 대한 정보를 이미지 형식으로 표현한 데이터도
공개된 출처를 통하여 쉽게 구할 수 있다.
이미지에서 건축 공간에 대한 정보를 인식하는 것은
공간배치 분석과는 또 다른 주제이지만,
앞으로 공개된 데이터를 활용한 연구가 늘어나면서 그 중요성이 높아질 것이다.

다른 하나의 딥 러닝 모형인
순환 신경망은
순차적인 데이터 분석에 특화된 딥 러닝 모형이다.
필기 인식이나 음성 인식 등
전체 데이터를 한번에 처리하는 것이 불가능하거나
길이를 미리 알 수 없는 데이터를 처리하는 데 적합하다.
순환 신경망에서 각 단계의 출력값은 이전 단계의 출력값의 함수로 표현된다.
따라서 순환 신경망은
시계열적으로 가까운 요소끼리 밀접한 관련이 있는 데이터를 분석하는 데 적합하다.

일반적으로 건축 공간의 재현에서는 시간적 차원이 고려되지 않으므로,
1차원적인 구조의 순환 신경망이 활용될 여지가 많지 않다.
그러나 드물게 건축 공간에 대한 시계열적인 모형화 사례도 존재한다.
이동 경로에 따른 가시영역의 변화를 분석하는 경우,
가시영역과 관련한 다양한 지표가 일정 간격으로 변화하는 것으로
모형화할 수 있다.

다만 가시영역 자체는 2차원 데이터이므로,
가시영역의 변화를 직접 분석하기 위해서는
2차원 데이터를 분석할 수 있는 합성곱 신경망을
순환적인 구조로 구축한 모형이 필요하다.
그러한 구조의 신경망 모형인
순환 합성곱 신경망 (recurrent convolutional neural network, RCNN)이
연구되고 있으나
일반 합성곱 신경망에 비해
발전 속도나 활용 면에서 두각을 보이지는 못하고 있다.

이 연구에서는 공개된 평면도를 활용하여
한국 아파트 전수조사가 가능한 분석 방법론을 구축하는 것을 목표로 한다.
이러한 분석의 대상은
이미 이미지 형식이거나 이미지 형식으로 변환할 수 있는
2차원 평면 공간이다.
따라서 단위평면을 분석하기 위하여
합성곱 신경망을 활용할 수 있도록
건축 공간을 2차원 직교 격자 구조의 이미지로 표현한다.

합성곱 신경망에 입력되는 이미지는 공간적으로는 2차원 격자 구조이지만
한 지점의 색을 표현하기 위하여 깊이 차원을 함께 갖는다.
예를 들어, RGB 컬러 이미지는
빛의 삼원색인 빨강, 초록, 파랑 세 가지 색 각각의 이미지 평면을 가진다.
이러한 구조는 건축 공간에서 한 지점이 지니는 다양한 성격을 표현하는 데에도 활용할 수 있다.

유사한 예로,
바둑 인공지능 알파고는 바둑 규칙에 따른 상황을 수십 가지 평면으로 표현한다.
각 지점에 놓인 돌의 색, 축 여부 등과 함께,
인접한 8지점의 수순, 활로의 수, 따내거나 따일 수 있는 돌의 수 등을 모두 각각의 평면으로 표현한다.
이렇게 하여 바둑판의 크기는 19\times 19개 점에 불과하지만,
각 지점마다 11가지 특징 (feature)을 48차원에 걸쳐 표현하게 된다.
[@Silver2016]
마찬가지로 이미지 깊이 차원을 활용하여
건축 공간의 다양한 특성도
딥 러닝 모형에 입력하여 분석할 수 있다.

건축 공간을 모형화하는 과정에서 실제로 어떠한 특징이 포함되는지는
분석 설계와 가용한 데이터의 성격에 따라 달라질 수 있다.
예를 들어, VAE나 VGA 분석 결과는 그 자체로 딥 러닝 분석의 대상이 될 수 있다.
이러한 경우, 각 분석에서 도출된 다양한 지표값이 입력 이미지의 깊이 차원이 된다.
만약 BIM 데이터를 분석에 활용하는 경우,
각 지점별로 실 종류나 면적 등의 벡터 데이터를 래스터화 (rasterization) 하여 표현할 수 있다.

한편, 이미지 형태로 수집된 도면이나 위성사진 등을 활용하는 경우,
미리 전처리를 적용하느냐에 따라 두 가지 방향이 가능하다.
하나는 전처리를 적용하지 않고 이미지를 그대로 입력하여
딥 러닝 모형에 종단간 학습 (end-to-end learning)을 적용하는 것이다.
이 경우 입력 데이터는 원본 이미지 자체가 되며,
사람이 눈으로 도면을 보고 공간을 파악하듯이
딥 러닝 모형이 색으로 표현된 이미지에서 건축 공간을 인식하도록 학습시킨다.
다시 바둑 인공지능에 비유하면,
바둑판에 놓인 돌의 배치와 수순만 주고 현재 형세를 알아서 학습하도록 시키는 것과 같다.
다른 하나는 사람이 먼저 이미지를 처리하고
건축 공간의 구조를 나타낼 수 있는 데이터를 딥 러닝 모형에 입력하는 것이다.
이 경우 건축 공간 모형에 포함되는 특징은
이미지에서 어떠한 정보를 어떻게 구성하느냐에 따라 다양하게 나타날 수 있다.

딥 러닝은 데이터에서 주어진 작업을 수행하는 방법을 배울 수 있을 뿐만 아니라,
이를 위해 필요한 특징을 추출하는 표현 학습 (representation learning) 에도 뛰어나다.
따라서 이론적으로는 사람과 마찬가지로
종단간 학습을 통하여
이미지에서 공간배치와 그 구조를 바로 학습할 수 있다.
그러나 현실적으로는 이러한 방법을 적용하기 어려운 몇 가지 단점이 있다.

그 한 가지는, 종단간 학습에는 매우 많은 계산량이 필요하다는 것이다.
이미지 인식은 그 자체만으로도 충분히 어려운 문제이기 때문에
한번에 처리하는 것보다 여러 단계로 나누어
각자 다른 방법론을 적용하는 것이 훨씬 쉬울 수 있다.
다른 한 가지는, 딥 러닝 모형이 무엇을 학습할지 통제할 수 없다는 것이다.
딥 러닝 모형이 이미지를 인식하는 방식은 사람과 크게 다르기 때문에
연구자가 의도하지 않은 의외의 특징을 찾아 학습할 수 있다.
이러한 경우 연구자가 직접 입력 데이터의 전처리를 수행하는 것은
그 안에 담긴 정보를 선별하여 정확한 학습을 유도하는 효과가 있다.

따라서 이 연구에서는,
합성곱 신경망에 적합한 2차원 이미지의 형태로 건축 공간의 배치를 모형화한다.
특히, 전처리 과정에서
미리 공간배치와 관련된 정보만 선별하여
딥 러닝 모형이 공간배치에서 나타나는 특성을 정확하게 학습할 수 있도록 한다.
