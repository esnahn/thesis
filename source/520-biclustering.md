## 주거공간 배치유형 도출 {#sec:type}

한국 아파트 단위평면에서 나타나는
시기별 주거공간 배치를 학습한 딥 러닝 모형이 도출한
시기별 주거공간 배치 특성을 기반으로,
잠재표현에서 나타나는 평면 계획 특성과
이에 해당하는 단위평면 사례를 짝지어 유형화한다.

한국 아파트 단위평면을 시기별로 분류하는 작업을 학습한
수정 VGG-GAP 모형은
각 평면 사례에서 나타나는 계획 특성을
잠재표현 계층의
512개 노드를 활성화 (activation) 하는 강도로 판단한다.
즉, 이 모형은 주거공간 배치 행렬 데이터가
512가지 패턴 각각에 대하여 얼마나 정확하게 일치하는지 살핀 후,
그 결과를 기반으로 준공 시기를 예측하여 분류하는 것이다.

이렇게 학습된 잠재표현을 바탕으로,
이 모형은 91%의 사례에 대하여 작은 오차로 준공 시기를 예측할 수 있다.
따라서 수정 VGG-GAP 모형이 학습한
512가지 주거공간 배치 패턴으로 구성된 잠재표현은
시간에 따른 한국 아파트의 진화과정을 분석하기에 필요한
주거공간 배치 계획 특성을 담고 있다고 판단할 수 있다.

단위평면 유형화의 첫 단계로,
모든 단위평면에 대한 모든 잠재표현 노드의 활성화 값을
행렬의 형태로 표현한다.
잠재표현 활성화 행렬에서,
각 단위평면은 50,252개 행으로,
수정 VGG-GAP 모형에 각 단위평면을 입력시켰을 때
잠재표현 계층의 512개 노드가 활성화되는 값을
512개 열로 표현된다
([@fig:activation]).

![잠재표현 활성화 행렬](vgg_activation.png){#fig:activation}

바이클러스터링 알고리즘인 spectral co-clustering은
이 행렬에 대하여
활성화 값이 높게 나타나는
단위평면 행과 잠재표현 노드 열의 짝을
양방향으로 찾아,
전체 행렬을 정해진 수의 바이클러스터로 나누게 된다.

바이클러스터링 분석에 앞서,
전체 단위평면을 몇 개의 유형으로 나누는지를 의미하는
바이클러스터 수를 결정하여야 한다.
적절한 바이클러스터의 개수는 데이터에 따라 달라진다.
바이클러스터 개수가
너무 적으면 주거공간 배치의 차이를 충분히 표현하지 못하고,
너무 많으면 비슷한 단위평면이 별개의 유형으로 갈라지게 된다.

적절한 바이클러스터 수를 결정하기 위하여,
각 단위평면의 잠재표현 활성화 값을 기준으로
Mini-Batch K-Means 군집 분석을 수행하였다.
[@sculley2010web]
군집의 수를 2개에서 30개까지 바꿔가면서,
군집의 수가 증가함에 따라
군집 분석 과정에서 생략된 정보의 크기를 의미하는
관성 (inertia, 군집 중심까지의 거리의 제곱합) 지표의 값이
감소하는 속도를 측정한다.
이를 통하여,
바이클러스터를 하나 더 추가할 때
추가적으로 얻을 수 있는 정보의 양을 바탕으로
충분한 정보를 얻을 수 있는 적절한 바이클러스터의 개수를 결정한다.

[@fig:biclust_n]에서,
군집 수에 따른 관성 지표 (파랑) 값이
군집 수가 하나 늘어날 때마다 감소하는 속도는 (빨강)
점차 감소하다가,
군집 수가 16개를 넘어선 이후로는
크게 감소하지 않는다.
즉, 16개보다 많은 바이클러스터에서
추가적으로 얻을 수 있는 정보가 크지 않음을 알 수 있다.
따라서 이 연구에서는 바이클러스터의 개수,
즉 주거공간 배치유형 수를 16개로 설정하였다.

![바이클러스터 수 결정](biclust_n.pdf){#fig:biclust_n}

다음으로,
잠재표현 활성화 행렬에 대한 바이클러스터링을 통하여
한국 아파트 단위평면의 주거공간 배치유형을 도출하였다.
[@fig:biclust_before]의 잠재표현 활성화 행렬에 대하여
바이클러스터링 분석을 수행한 후,
바이클러스터별로 단위평면 행과 잠재표현 노드 열을 각각 정렬한 결과는
[@fig:biclust_after]와 같다.
이 때,
바이클러스터의 순서는
각 바이클러스터에 속한 단위평면 사례의 평균 준공연도를 기준으로
정렬하였다 ([@tbl:mean_year]).

|유형코드|평균 준공연도|유형코드|평균 준공연도
|:---:|----------:|:---:|----------:
|1       | 1989.4      |9       | 2005.6
|2       | 1992.4      |10      | 2005.9
|3       | 1993.3      |11      | 2006.1
|4       | 1996.5      |12      | 2008.9
|5       | 1997.4      |13      | 2009.7
|6       | 1999.6      |14      | 2011.0
|7       | 2000.0      |15      | 2012.3
|8       | 2004.4      |16      | 2014.3

: 배치유형별 평균 준공연도 {#tbl:mean_year}

<div id="fig:biclust">

![잠재표현 활성화 행렬](biclust_before.pdf){height=45% #fig:biclust_before} \qquad
![시기별 바이클러스터 기준 정렬](biclust_after.pdf){height=45%  #fig:biclust_after} \qquad

잠재표현 활성화 행렬 바이클러스터링
</div>

\newpage

가상의 데이터에 대한 바이클러스터링 분석 결과를 보여주는
[@fig:coclust]과 비교하면,
[@fig:biclust_after]의 바이클러스터링 결과는
단위평면과 잠재표현 노드의 활성화 사이에
1:1 관계가 정확하게 성립하지 않음을 알 수 있다.
현실에서는 하나의 단위평면에서
서로 독립적인 다양한 주거공간 배치 계획 특성이 나타날 수도 있고,
한 가지 계획 특성이 다양한 단위평면 계획 유형에 걸쳐 적용될 수도 있다.
따라서 여기서 도출된 주거공간 배치유형은
특정한 계획 유형과
그 특성이 가장 명확하게 나타나는 단위평면이
짝지어진 관계로 해석하여야 한다.
또한, 이러한 유형들이 서로 연관되는 패턴을 분석하여
현실에서 여러 계획 특성이 모여
하나의 상위 유형을 이루는 연관관계를 파악할 필요가 있다.

[@fig:biclust_mean]은
각 유형에 해당하는 단위평면에서
유형별 모형에 해당하는
잠재표현 노드의 평균 활성화 강도를 나타낸 것이다.
각 행은 해당 유형에 속한 단위평면,
각 열은 해당 유형에 속한 잠재표현 노드를 나타낸다.
바이클러스터링의 결과로,
단위평면과 잠재표현이 서로 동일한 유형에 해당하는
대각선 성분이 다른 행이나 열에서보다 높게 나타나는 것은 당연하다.
그러나 일부 유형에서는
다양한 행이나 열에서 높은 활성화가 나타나는 것을 알 수 있다.
또, 그렇게
높은 활성화를 보이는 단위평면의 유형과 잠재표현의 유형은
멀리 떨어진 유형 (예: 1번 유형과 14번 유형) 에서보다는
인접한 유형 (예: 1번과 2번, 13번과 14번)인 경우가 많다는 것도
확인할 수 있다.

![유형별 모형의 평균 활성화 강도](biclust_mean.pdf){#fig:biclust_mean}

각 주거공간 배치유형이 평균 준공연도로 정렬되었다는 점을 고려하면,
인접한 유형 사이에서 높은 활성화를 보인다는 것은
유사한 시기에 계획된 다양한 단위평면 사이에
여러 계획 특성이 같이 나타나는 경우가 많다는 의미이다.
예를 들어,
13번 유형의 잠재표현 노드는
8번부터 16번까지 다양한 유형의 단위평면에 걸쳐
일반화된 주거공간 배치 패턴을 인식하는 유형이다.
다른 유형에서 이렇게 극단적인 예는 드물지만,
반대로 단 한 유형의 단위평면에만 활성화되는 잠재표현 노드도 거의 없다.

이렇게 여러 유형 사이에서 나타나는 연관성을 분석하기 위하여
각 유형의 잠재표현 활성화 강도에 대한 상관분석을 수행하였다.
모든 단위평면에 대하여,
각 유형별 잠재표현 노드에 대한 활성화 값의 합계를
해당 유형의 활성화 강도로 정의하고,
서로 다른 유형이 모든 단위평면에서 활성화되는 강도 사이에서 나타나는
상관계수를 [@fig:biclust_corr]과 같이 나타내었다.
두 주거공간 배치유형의 상관계수가 높을수록
두 유형이 인식하는 주거공간 배치 패턴이 동일한 단위평면에서 나타난다는 의미이다.
반대로 상관계수가 0보다 작은 경우,
한 유형의 주거공간 배치가 나타나는 단위평면에서는
다른 유형의 주거공간 배치가 나타나지 않을 가능성이 더 커진다는 것을 의미한다.

![유형별 모형의 활성화 강도에 대한 상관분석](biclust_corr.pdf){#fig:biclust_corr}

상관분석 결과에서,
서로 인접한 배치유형 사이에는
양의 상관관계가 나타나는 경우가 많음을 확인할 수 있다.
그 안에서도
1번에서 5번까지, 8번에서 11번까지, 13번에서 16번까지 등
3개 집단에서 특히 높은 상관관계가 군집을 이루어 나타난다.
이러한 군집은 유사한 시기의 단위평면에 대하여
여러 계획 특성이 동시에 나타나는
상위 평면 계획 유형의 존재를 시사한다.

한편,
5번과 12번, 6번과 15--16번은
평균 준공연도가 10년 이상 떨어져있는데도
양의 상관관계를 보인다.
이러한 관계는 특정 시기에 한정되지 않고
다양한 시기의 단위평면에서 나타나는 주거공간 배치 특성을 의미할 수 있다.
그러나 [@fig:biclust_mean]에서 각 유형의 단위평면과 잠재표현 노드의 관계를 검토하면,
인접한 유형의 활성화에 비하면 그 강도가 약한 것을 확인할 수 있다.
따라서 해당 유형 사이의 관계에 대한 해석은
[-@sec:bam]절에서 BAM 분석을 통하여 실제 주거공간 배치 특성을 확인한 이후에 진행한다.

이와 반대로,
시기적으로 많이 떨어진
배치유형 사이에는
음의 상관관계가 나타난다.
3번, 6번, 15번 유형의 경우는
그 정도가 특히 두드러져,
각 유형이 속한 군집을 제외하면
대부분의 유형과의 관계에서 음의 상관관계가 나타난다.
이 세 유형은 다른 단위평면들과 유사한 주거공간 배치를 공유하지 않는
비교적 독립적인 단위평면 계획에 대한 유형임을 파악할 수 있다.
