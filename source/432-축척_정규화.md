### 평면도 축척 정규화 {#sec:scale}

평면도 정규화의 다음 단계로
다양한 단위평면의 축척을 딥 러닝 분석에 적합한 값으로 일치시키는 것이다.
단위평면 속 주거 공간 배치를 비교하기 위해서는
개별 공간의 크기도 중요한 정보이므로
단위평면의 규모를 정확하게 반영하는 것이 중요하다.

수집된 평면도에서 단위평면은 다양한 축척으로 표현된다.
단위평면은 일정한 크기의 이미지를 가득 채우도록 배치되어
축척이 일정하게 정해지지 않고,
표현되는 공간의 면적에 따라 축척이 달라지게 된다.
동일한 규모의 단위평면 사이에서도
평면의 세장비에 따라,
코어 및 인접 단위세대의 표현 여부에 따라
표현되는 공간의 크기가 영향을 받으므로
축척이 달라질 수 있다.

일부 평면도에는 치수가 표기되어 있기도 하지만,
대다수의 평면도에서는 축척과 치수가 표기되어 있지 않다.
<!-- ([@fig:wall_error]) -->
따라서 수집된 평면도에 포함된 정보만으로는
모든 평면도에서 정확한 축척을 파악할 수 없다.
이 연구에서는
네이버 부동산에서 평면도와 함께 공개하는 전용면적 값을 활용하여
단위평면의 축척을 정규화한다.
[-@sec:recog]절에서 인식된 단위평면의 실내 영역 중에서
발코니를 제외한 나머지 실내 공간 영역의 합과
전용면적을 비교하여 평면도의 축척을 산출한다.

각 평면도의 축척을 파악한 이후에는
평면도 이미지의 크기를 조절하여
딥 러닝 분석에 적합한 새로운 축척으로
단위평면의 축척을 정규화한다.
새로운 축척은
한국 아파트 단위세대의 규모와
딥 러닝 모형의 요구조건을 고려하여 결정된다.
이 연구에서 구축하는 한국 아파트 데이터셋도
다양한 딥 러닝 모형에 적용할 수 있도록
한국 아파트의 단위평면을 이러한 이미지 크기 안에 담을 수 있는 축척을 설정한다.

기계학습 및 딥 러닝 연구에서 많이 활용된
MNIST 데이터셋은 가로 및 세로가 28 픽셀인 이미지로 이루어져 있으며,
따라서 MNIST을 대상으로 설계된 모형은 크기가 28 픽셀인 이미지의 처리에 최적화되어 있다.
그 이후에도 다양한 데이터셋과 딥 러닝 모형에서
28픽셀에서 크기를 2배씩 증가시킨 56, 112, 224 픽셀 크기의 이미지를 입력값으로 받는다.
CNN 모형의 내부 구조에서는 이미지 크기를 절반으로 줄이는 계층이 자주 활용되므로,
크기를 2배씩 증가시킨 이미지는 다양한 딥 러닝 모형에 쉽게 적용할 수 있다.
이러한 이미지 크기에 담기는 단위평면의 크기는
수집된 평면도를 통하여 파악할 수 있다.
[-@sec:normalization]절의 알고리즘을 적용하여 방향과 축척이 정규화된 평면도를 대상으로,
여백을 제외하고 단위평면 영역의 폭과 깊이를 분석한 결과는
[@fig:fp_size]과 같다.
이에 따르면,
한국 아파트의 단위평면은
폭과 깊이 모두에서 약 12 미터인 경우가 가장 많이 나타나며,
가장 큰 단위평면도 폭과 깊이 모두에서 그 두 배인 24 미터 이하에 해당한다.
24 미터를 56, 112, 224 픽셀 안에 대응시키기 위해서는,
미터당 2.3, 4.7, 9.3 픽셀의 축척이 필요하다.

![단위평면의 폭 및 깊이 분포](fp_size_kde.pdf){#fig:fp_size}

이 연구에서는
원본 평면도 이미지의 정확도를 고려하여
미터당 5 픽셀 (5 px/m)의 축척을 정규화에 적용한다.
이 경우 112 픽셀이 22.4 미터에 해당하여
한국 아파트에서 나타나는 가장 큰 단위평면 전체를
딥 러닝 모형의 입력값으로 표현할 수 있다.
최종적으로
한국 아파트 단위평면 데이터셋에서
공간배치 데이터는 가로 세로 112 픽셀 크기의 이미지에 6개 주거 공간의 정보를 담는
(112\times 112\times 6) 크기의 행렬로 표현된다.
